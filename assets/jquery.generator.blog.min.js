/*
* tumblr template + continuity - blog generator script
* v1.7
* 06/04/2017
* music is the sound of math and code is not spaghetti
* complemental.github.io
*/
function generateBlog(e,t){var a=$("input[name=avatarimage]").val(),r=$("input[name=blogname]").val();r?$.ajax({url:"index-template.txt",dataType:"text",cache:!1,success:function(n){$.each(e,function(){var e=$(this).attr("name"),t=$(this).val(),i=new RegExp("{{{"+e+"}}}","g");if(!t&&"headerblurb"!==e)switch(e){case"blogtitle":t=r;break;case"colorbackground":t="#f3f3f3";break;case"colorhighlight":t="#8eb8e5";break;case"avatarimage":t="http://i.imgur.com/rElAs3S.png";break;case"headerimage":var c=["http://i.imgur.com/Z8yGHql.png","http://i.imgur.com/qGiWzrz.png","http://i.imgur.com/9S1H5UX.png","http://i.imgur.com/w8lC5Qe.png","http://i.imgur.com/oblpALN.png","http://i.imgur.com/Al6cEeW.png","http://i.imgur.com/oWn51U4.png","http://i.imgur.com/HPPV54Q.png","http://i.imgur.com/TwrwY6U.png"];t=c[Math.floor(Math.random()*c.length)];break;case"favicon":t=a||"http://i.imgur.com/rElAs3S.png"}if(n=n.replace(i,t),"colorhighlight"===e){var o=colorLuminance(t,-.3);n=n.replace("{{{coloralt}}}",o)}}),n=n.replace("{{{blogname}}}",r),t(n)}}):alert("wups, a blog name is required!")}function colorLuminance(e,t){(e=String(e).replace(/[^0-9a-f]/gi,"")).length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),t=t||0;var a,r,n="#";for(r=0;r<3;r++)a=parseInt(e.substr(2*r,2),16),n+=("00"+(a=Math.round(Math.min(Math.max(0,a+a*t),255)).toString(16))).substr(a.length);return n}$(document).ready(function(){var e=$("#generated-panel"),t=$("form:first").children("input");$("main").on("click","#generate",function(){generateBlog(t,function(t){e.slideDown(300,function(){e.children("textarea:first").val(t).select()})})})});
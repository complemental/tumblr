/**
 * script - tumblr template + continuity
 * v1.8
 * 06/04/2017
 * music is the sound of math and code is not spaghetti
 * complemental.github.io
*/
$.fn.loadContinuity=function(a){function e(e,t){for(var s={},o=getXmlDatakeys(),l=o.length,i=a.postTemplate,n=0;n<l;n++)s[o[n]]=e.find(o[n]).text();switch(s.note&&(s.note='<div class="text-content">'+s.note+"</div>"),s.title&&(s.title='<div class="post-title">'+s.title+"</div>"),s.date&&(s.date='title="'+s.date+'"'),s.reblog&&(s.user&&(s.user='<span><a href="http://'+s.user+'.tumblr.com">'+s.user+"</a>:</span>"),s.reblog='<div class="text-reblog">'+s.user+"<p>"+s.reblog+"</p></div>"),s.via&&(s.via='<div class="post-via">(via <a href="'+s.permalink+'">'+s.via+"</a>)</div>"),s.tags&&(s.tags=formatHashtags(s.tags,"tags-wrapper")),s.type){case"text":s.main=formatLines(s.text,"p","text-wrapper");break;case"photo":s.main=formatPhoto(s.media,s.permalink);break;case"quote":s.main=formatQuote(s.text,s.quotesource,"quote-wrapper");break;case"chat":s.main=formatLines(s.text,"p","chat-wrapper",formatChatLine);break;case"video":s.main=formatYouTube(s.video);break;default:console.log("error: invalid type.")}for(key in s){var r=new RegExp("{{{"+key+"}}}","g");i=i.replace(r,s[key])}return i}function t(t){var s=$("#"+r+t),o=l+"/"+s.data("page")+".xml";if(s.siblings().hide().removeClass("js-content-open"),s.hasClass("js-content-loaded"))$("html, body").animate({scrollTop:$("#main-wrapper").offset().top-30},600);else{var i="";s.hide(),$.ajax({type:"GET",url:o,dataType:"xml",success:function(t){$(t).find("post").each(function(a){a++,i+=e($(this),a)}),a.loaderCallback?a.loaderCallback(s,i):s.append(i),s.addClass("js-content-loaded")}})}s.fadeIn().addClass("js-content-open")}var s,o=window.location.pathname,l=o.substring(0,o.lastIndexOf("/")),i=window.location.hash.substr(1),n=($("body").width(),$("#wrapper-content")),r="content-page-",p={pages:[],pageNum:1,postTemplate:'<div class="post">{{{main}}}<div class="post-content">{{{via}}}{{{title}}}{{{reblog}}}{{{note}}}{{{tags}}} <ul class="tumblr-links" {{{date}}}> <a href="{{{permalink}}}"><li class="tumblr-permalink"></li></a> <li class="tumblr-reblog"></li> <li class="tumblr-like"></li> </ul> </div> </div>',loaderCallback:null};(a=$.extend(!0,{},p,a)).pages[0]?(jQuery.each(a.pages,function(e,t){var e=e+1;n.append('<div id="'+r+e+'" data-page="'+t+'"></div>'),t==i&&(a.pageNum=e)}),$(".page-nav").bootpag({page:a.pageNum,total:a.pages.length,maxVisible:5,leaps:!0}).on("page",function(a,e){s!==e&&(s=e,n.css("width",n.width()),t(e))}),console.log("page index : "+a.pageNum),t(a.pageNum)):n.append("no posts available.")};